{% extends "base.html" %}

{% block variables %}
<script>
var papers = {{ papers | tojson }};
var tags = {{ tags | tojson }};
var words = {{ words | tojson }};
var words_desc = {{ words_desc | tojson }};
var gvars = {{ gvars | tojson }};
/*
JS code here handles pagination. I really don't super love this approach,
if anyone can think of a cleaner / shorter way please let me know.
*/
var move_page = function(int_offset) {
    var queryParams = new URLSearchParams(window.location.search);
    queryParams.set("page_number", Math.max(1, parseInt(gvars.page_number) + int_offset));
    window.location.href = '/?' + queryParams.toString();
}
</script>
{% endblock %}

{% block content %}
<div id="main-header">
    <h1><span class="title-first">Wyszukiwarka</span><br><span class="title-second">publikacji</span></h1>
    <form action="/" method="get" class="search-form">
        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input type="text" name="q" placeholder="Wyszukaj s≈Çowo kluczowe, autora lub tytu≈Ç..." id="search-bar">
            <button type="submit" id="search-btn">Wyszukaj</button>
        </div>
    </form>
</div>

<div id="recommended-section">
    <h2>Polecane publikacje</h2>
    <div id="cards">
        {% for paper in papers[:8] %}
        <a href="/inspect?pid={{ paper.id }}" class="card">
            <h3>{{ paper.title }}</h3>
            <p class="author">{{ paper.authors }}</p>
            <div class="tags">
                {% for tag in paper.tags.split(', ') %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            <p class="date">üìÖ {{ paper.time }}</p>
        </a>
        {% endfor %}
    </div>
</div>
{% endblock %}

